{% extends 'base.html.twig' %}

{% block title %}
	{{app.user.nom ~' '~ app.user.prenom }}
{% endblock %}
{% block css %}
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="{{asset('css/sidebar.css')}}">
{% endblock %}

{% block body %}
<div class="profile">

<div class="w3-sidebar w3-light-grey w3-bar-block" style="width:20%">
	<h3 class="w3-bar-item">Menu</h3>
	<a href="{{path('app_info')}}" class="w3-bar-item w3-button">Mes informations</a>
	<a href="#" class="w3-bar-item w3-button">Mes specialites culinaire</a>
	<a href="#" class="w3-bar-item w3-button">Gerer mon adresse</a>
	<a href="{{path('app_profile_annonces')}}" class="w3-bar-item w3-button">Mes annonces</a>
	<a href="#" class="w3-bar-item w3-button">Mes favoris</a>
	<a href="#" class="w3-bar-item w3-button">Messagerie</a>
  </div>
  <div class="d-flex left">
    <h2 class="coloredTitle m-4">Bienvenue
        {{app.user.prenom| capitalize }}
        !</h2>
        {% if app.user.annonces | length == 0 %}
    <h3 class="m-4">Vous avez pas encore des annonces!</h3>
    <img src="{{asset('images/cooking.svg')}}" class="img_cook" alt="" srcset="">
{%else%}
    <h3 class="m-4">Mes annonces: ({{app.user.annonces | length }})</h3>
    {% for annonce in annonce %}
    <div class="card w-50">
        <div class="card-header btn-primary">
            {{annonce.titre}}        </div>
        <div class="card-body">
          <p class="card-text">{{ annonce.resume()}}</p>
          <a href="{{path('details', {annonce: annonce.id})}}" class="btn btn-primary">Voir plus ...</a>
        </div>
      </div>
    {% endfor %}
    {%endif%}
    {% if app.user.annonces | length > 4 %}

        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-end text-primary">

                <li class="page-item text-primary{{ ( page == 1 ) ? 'disabled' : '' }}"></li>

                <a class="page-link" href="?page ={{ page - 1}}">Previous</a>
            </li>
            {% set pages = (total / limite) | round (0, 'ceil') %}
            {% for item in 1..(pages) %}

                <li class="page-item {{ page == item ? 'active' : '' }}">
                    <a class="page-link" href="?page={{item}}">{{item}}</a>
                </li>
            {% endfor %}

            <li class="page-item {{ ( page == pages ) ? 'disabled' : '' }}">
                <a class="page-link" href="?page={{ page + 1 }}">Next</a>
            </li>
        </ul>
    </nav>
{% endif %}
<a href="{{ path('create_annonce') }}" class="btn btn-primary">Deposer une annonce</a>

</div>
</div>

{% endblock %}